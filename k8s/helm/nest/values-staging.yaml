# Staging Environment Values
# Override default values.yaml for staging deployment

global:
  environment: staging
  domain: nest-staging.local

app:
  replicaCount: 2

  image:
    tag: "v1.0.0"

  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi

  ingress:
    hosts:
      - host: nest-staging.local
        paths:
          - path: /
            pathType: Prefix

  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 80
    targetMemoryUtilizationPercentage: 80

config:
  flask:
    debug: false
    logLevel: INFO
    environment: staging

  monitoring:
    metricsEnabled: true

database:
  type: postgresql
  externalConnection:
    host: postgres.staging.svc.cluster.local
    port: 5432
    database: nest_staging

cache:
  externalConnection:
    host: redis.staging.svc.cluster.local
    port: 6379

networkPolicy:
  enabled: true

podDisruptionBudget:
  enabled: true
  minAvailable: 1
